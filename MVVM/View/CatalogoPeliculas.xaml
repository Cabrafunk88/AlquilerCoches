<Page x:Class="Conectar.MVVM.View.CatalogoPeliculas"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:Conectar.MVVM.ViewModel" 
      Title="Catalogo">

    <Page.DataContext>
        <vm:TodasLasPeliculasViewModel/>
    </Page.DataContext>

    <Page.Background>
        <SolidColorBrush Color="#1a1a1a"/>
    </Page.Background>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <ItemsControl ItemsSource="{Binding ListaCompleta}" Margin="20">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="5" VerticalAlignment="Top"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid Width="145" Margin="10,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Button Grid.Row="0" Cursor="Hand" Tag="{Binding PeliculaID}" Click="Pelicula_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border CornerRadius="4" ClipToBounds="True">
                                        <Image Source="{Binding PortadaURL}" 
                                               Height="215" 
                                               Width="145"
                                               Stretch="UniformToFill"
                                               RenderOptions.BitmapScalingMode="HighQuality"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <TextBlock Grid.Row="1" 
                                   Text="{Binding Titulo}" 
                                   Foreground="White" 
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Margin="0,8,0,0"
                                   HorizontalAlignment="Center" 
                                   TextAlignment="Center" 
                                   TextWrapping="Wrap"/>
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</Page>